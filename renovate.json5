{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "schedule": "before 5am every weekday",
  "extends": [
    "config:best-practices",
    ":automergeDisabled",
    ":gitSignOff",
    ":label(dependencies)",
    ":semanticCommitTypeAll(chore)",
  ],
  "forkProcessing": "enabled",
  "baseBranches": [
    "master",
  ],
  "enabledManagers": [
    "custom.regex",
    //    "dockerfile",
    "github-actions",
    //    "gomod",
    //    "helm-values",
  ],
  //  "postUpdateOptions": [
  //    "gomodMassage",
  //    "gomodTidy",
  //  ],
  "ignorePaths": [
    "(^|/)([Dd]ocker|[Cc]ontainer)file[^/]*\\.dockerignore$",
  ],
  "customManagers": [
    {
      "customType": "regex",
      "fileMatch": ["\\.github\/.*\\.ya?ml$"],
      "matchStrings": [
        "(?<packageName>Kong\\/public-shared-actions\\/(?<depName>[^\\s@]+))@(?:(?<currentDigest>[^\\s]+) # v?)?(?<currentValue>[^\\s]+)",
      ],
      "datasourceTemplate": "github-tags",
      "extractVersionTemplate": "^(?:@{{{depName}}}@|v)(?<version>[0-9\\.]+)$",
      "autoReplaceStringTemplate": "{{{packageName}}}@{{{newDigest}}} # v{{{newVersion}}}",
      "versioningTemplate": "semver",
    },
  ],
  "packageRules": [
    {
      "description": "No need to run tests on github actions updates",
      "matchManagers": ["github-actions"],
      "addLabels": ["ci/skip-test"],
    },
    {
      "groupName": "google.golang.org/genproto/googleapis/*",
      "groupSlug": "genproto-googleapis",
      "matchDatasources": ["go"],
      "matchPackageNames": ["google.golang.org/genproto/googleapis/**"],
    },
    {
      "matchPackageNames": ["Kong/public-shared-actions"],
      "matchManagers": ["github-actions"],
      "matchDatasources": ["github-tags"],
      "enabled": false,
    },
    {
      "matchManagers": ["github-actions"],
      "matchPackageNames": ["slsa-framework/slsa-github-generator"],
      "pinDigests": false
    },
  ]
}
